<% module_namespacing do -%>
class <%= model_klass.name.pluralize %>Controller < ApplicationController
  <%- if actions?('index') -%>
  def index
    <%= file_name.pluralize %> = <%= resource_klass %>.all(params)
    respond_with(<%= file_name.pluralize %>)
  end
  <%- end -%>
  <%- if actions?('show') -%>

  def show
    <%= file_name %> = <%= resource_klass %>.find(params)
    respond_with(<%= file_name.pluralize %>)
  end
  <%- end -%>
  <%- if actions?('create') -%>

  def create
    <%= file_name %> = <%= resource_klass %>.build(params)

    if <%= file_name %>.save
      respond_with(<%= file_name %>)
    else
      render jsonapi_errors: <%= file_name %>
    end
  end
  <%- end -%>
  <%- if actions?('update') -%>

  def update
    <%= file_name %> = <%= resource_klass %>.find(params)

    if <%= file_name %>.update_attributes
      respond_with(<%= file_name %>)
    else
      render jsonapi_errors: <%= file_name %>
    end
  end
  <%- end -%>
  <%- if actions?('destroy') -%>

  def destroy
    <%= file_name %> = <%= resource_klass %>.find(params)

    if <%= file_name %>.destroy
      render json: { meta: {} }
    else
      render jsonapi_errors: <%= file_name %>
    end
  end
  <%- end -%>
end
<% end -%>
